# M9: Advanced Features

Each sub-milestone is independently useful and shippable.

## 9.1 REPL Mode

- [ ] `monty_repl_create()` / `monty_repl_eval()` in C API
- [ ] Dart `MontyRepl` class with `eval(String line)` method
- [ ] Flutter widget: embedded Python REPL with syntax highlighting
- [ ] Tests: multi-line input, state persistence, error recovery

## 9.2 Type Checking

- [ ] `monty_type_check()` in C API (exposes ty type checker)
- [ ] `Monty.typeCheck(String code)` returning diagnostics
- [ ] Source location mapping
- [ ] Tests: valid code, type errors, import errors

## 9.3 Snapshot Persistence Helpers

- [ ] Save/restore to device storage (`path_provider`)
- [ ] Cloud sync: snapshot -> backend -> resume on another device
- [ ] Versioned format with migration support
- [ ] Tests: save/restore round-trip, version migration

## 9.4 External Function Registry

- [ ] `monty.register('fetch', fetchImpl)` declarative API
- [ ] Automatic Dart <-> Python type marshalling
- [ ] Per-function timeout
- [ ] Pre-built externals: HTTP fetch, JSON parse, timestamp
- [ ] Tests: registry, marshalling, timeout, pre-built functions

## 9.5 DevTools Extension

- [ ] Flutter DevTools extension panel
- [ ] Bytecode disassembly viewer
- [ ] Resource usage monitoring (live graphs)
- [ ] Execution timeline with external function calls
- [ ] Snapshot inspector

## Quality Gate (per sub-milestone)

```bash
dart format --set-exit-if-changed .
flutter analyze --fatal-infos
flutter test --coverage
# Coverage must be >= 90% for new code
```
